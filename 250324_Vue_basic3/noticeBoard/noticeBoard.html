<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue ê²Œì‹œíŒ ëª©ë¡</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div id="app">
      <h1>ğŸ“Œ ê²Œì‹œíŒ ëª©ë¡</h1>
      <div class="search-container">
        <input
          type="text"
          v-model="selectQuery"
          placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
        />
      </div>
      <div class="sort-buttons">
        <button @click="sortPosts('asc')">ì˜¤ë¦„ì°¨ìˆœ</button>
        <button @click="sortPosts('desc')">ë‚´ë¦¼ì°¨ìˆœ</button>
      </div>
      <!-- ê²Œì‹œê¸€ ëª©ë¡ í‘œì‹œ -->
      <!-- li íƒœê·¸ ì•ˆì— v-for ì ìš©í•´ì„œ ê²Œì‹œê¸€ ëª©ë¡ í‘œì‹œ -->
      <ul>
        <li
          v-for="post in filteredPosts"
          :key="post.no"
          class="post-item"
          @click="selectPost(post)"
        >
          {{ post.no }}. {{ post.title }}
        </li>
      </ul>

      <!-- ì„ íƒí•œ ê²Œì‹œê¸€ì˜ ë‚´ìš© í‘œì‹œ -->
      <!-- div íƒœê·¸ ì•ˆì— v-if ì ìš©.
           í´ë˜ìŠ¤ post-contentë¥¼ ì ìš©í•´ì„œ ê²Œì‹œê¸€ ëª©ë¡ì˜ í•˜ë‹¨ì— ëœ¨ë„ë¡ ì„¤ì • -->
      <div v-if="selectedPost" class="post-content">
        <h2>{{ selectedPost.title }}</h2>
        <p>{{ selectedPost.content }}</p>
        <button @click="closePost">ë‹«ê¸°</button>
      </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
      const { createApp, ref, computed } = Vue;

      createApp({
        setup() {
          // ê²Œì‹œê¸€ ëª©ë¡
          const posts = ref([
            {
              no: 1,
              title: 'Vue.js ê¸°ì´ˆ ë°°ìš°ê¸°',
              content:
                'Vue.jsëŠ” ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•œ í”„ë¡œê·¸ë ˆì‹œë¸Œ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.',
            },
            {
              no: 2,
              title: 'ìë°”ìŠ¤í¬ë¦½íŠ¸ ES6 ë¬¸ë²•',
              content:
                'ES6ëŠ” JavaScriptì˜ ìµœì‹  ë¬¸ë²•ì„ í¬í•¨í•˜ë©°, let/const, í™”ì‚´í‘œ í•¨ìˆ˜, êµ¬ì¡° ë¶„í•´ í• ë‹¹ ë“±ì„ ì œê³µí•©ë‹ˆë‹¤.',
            },
            {
              no: 3,
              title: 'Node.jsì™€ Express',
              content:
                'Node.jsëŠ” ì„œë²„ ì¸¡ì—ì„œ JavaScriptë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ëŸ°íƒ€ì„ì´ë©°, ExpressëŠ” ì´ë¥¼ ìœ„í•œ ê²½ëŸ‰ ì›¹ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.',
            },
            {
              no: 4,
              title: 'MongoDB ê¸°ë³¸ ê°œë…',
              content:
                'MongoDBëŠ” NoSQL ë°ì´í„°ë² ì´ìŠ¤ë¡œ JSONê³¼ ìœ ì‚¬í•œ ë¬¸ì„œ ê¸°ë°˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            },
            {
              no: 5,
              title: 'í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œì˜ ì°¨ì´',
              content:
                'í”„ë¡ íŠ¸ì—”ë“œëŠ” ì‚¬ìš©ìê°€ ë³´ëŠ” ë¶€ë¶„ì„ ê°œë°œí•˜ëŠ” ê²ƒì´ê³ , ë°±ì—”ë“œëŠ” ì„œë²„ì™€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.',
            },
            {
              no: 6,
              title: 'ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°',
              content:
                'JavaScriptì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ì—ëŠ” ì½œë°±, í”„ë¡œë¯¸ìŠ¤, async/awaitê°€ ìˆìŠµë‹ˆë‹¤.',
            },
            {
              no: 7,
              title: 'Vue Router ì‚¬ìš©ë²•',
              content:
                'Vue Routerë¥¼ ì‚¬ìš©í•˜ë©´ Vue.js ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í˜ì´ì§€ ì´ë™ì„ ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            },
            {
              no: 8,
              title: 'ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ê°œë°œ',
              content:
                'Vue.jsì—ì„œëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ UIë¥¼ ì‘ì€ ë‹¨ìœ„ë¡œ ìª¼ê°œì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            },
            {
              no: 9,
              title: 'CSSì™€ SCSS ì°¨ì´ì ',
              content:
                'SCSSëŠ” CSSì˜ í™•ì¥ëœ ë²„ì „ìœ¼ë¡œ ë³€ìˆ˜, ì¤‘ì²©, ë¯¹ìŠ¤ì¸ ë“±ì„ ì§€ì›í•©ë‹ˆë‹¤.',
            },
            {
              no: 10,
              title: 'Gitê³¼ GitHub ì‚¬ìš©ë²•',
              content:
                'Gitì€ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì´ë©°, GitHubëŠ” ì´ë¥¼ í™œìš©í•œ ì›ê²© ì €ì¥ì†Œ í”Œë«í¼ì…ë‹ˆë‹¤.',
            },
            ...Array.from({ length: 1000 }, (_, i) => ({
              no: i + 11,
              title: `ê²Œì‹œê¸€ ì œëª© ${i + 11}`,
              content: `ê²Œì‹œê¸€ ${
                i + 11
              }ì˜ ë‚´ìš©ì…ë‹ˆë‹¤. ì´ ê¸€ì€ ìë™ìœ¼ë¡œ ìƒì„±ëœ ë‚´ìš©ì…ë‹ˆë‹¤.`,
            })),
          ]);

          // ì„ íƒí•œ ê²Œì‹œê¸€ ì´ˆê¸°í™”
          const selectedPost = ref(null);

          // ê²Œì‹œê¸€ ì„ íƒí•˜ë©´ í•˜ë‹¨ì— ì—´ë¦¬ëŠ” í•¨ìˆ˜
          const selectPost = (post) => {
            selectedPost.value = post;
          };

          // ê²Œì‹œê¸€ ë‹«ê¸° í•¨ìˆ˜
          const closePost = () => {
            selectedPost.value = null;
          };

          //ì •ë ¬ ê¸°ëŠ¥
          const sortPosts = (order) => {
            if (order === 'asc') {
              console.log('ì˜¤ë¦„ì°¨ìˆœ');
              posts.value.sort((a, b) => a.no - b.no);
            } else {
              console.log('ë‚´ë¦¼ì°¨ìˆœ');
              posts.value.sort((a, b) => b.no - a.no);
            }
            /*
            sort(ì½œë°±í•¨ìˆ˜) : ë°°ì—´ì˜ ê° ìš”ì†Œë¥¼ ì½œë°±í•¨ìˆ˜ë¥¼ ê¸°ì¤€ì„ ë¹„êµí•˜ì—¬ ì •ë ¬
            ê²°ê³¼ê°’ < 0 : aê°€ bë³´ë‹¤ ì•ì— ì™€ì•¼í•¨
            ê²°ê³¼ê°’ > 0 : bê°€ aë³´ë‹¤ ì•ì— ì™€ì•¼í•¨
            ê²°ê³¼ê°’ = 0 : ìˆœì„œë¥¼ ë°”ê¾¸ì§€ ì•ŠìŒ
            */
          };

          // ê²€ìƒ‰ ê¸°ëŠ¥
          const selectQuery = ref('');

          const filteredPosts = computed(() => {
            console.log('ê²€ìƒ‰ ê¸°ëŠ¥ í˜¸ì¶œë¨.');

            // ê²€ìƒ‰ì–´ê°€ ì—†ì„ ë•ŒëŠ” ì „ì²´ ê²Œì‹œê¸€ ë³´ì—¬ì£¼ê¸°
            if (!selectQuery.value) {
              return posts.value;
            }

            // ì†Œë¬¸ìë¡œ ì¤„ì´ê¸°
            const query = selectQuery.value.toLowerCase();

            // filter:
            // ë°°ì—´ì˜ ê° ìš”ì†Œì— ëŒ€í•´ ì£¼ì–´ì§„ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìš”ì†Œë§Œ ëª¨ì•„ ì„¸ ë°°ì—´ì„ ì™„ì„±í•¨
            return posts.value.filter(
              (post) =>
                post.title.toLowerCase().includes(query) ||
                post.content.toLowerCase().includes(query)
            );
          });

          return {
            posts,
            selectedPost,
            selectPost,
            closePost,
            sortPosts,
            selectQuery,
            filteredPosts,
          };
        },
      }).mount('#app');
    </script>
  </body>
</html>
